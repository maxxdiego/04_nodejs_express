<%- include ('partials/header.ejs') %>
<%- include ('partials/navbar.ejs') %>

<div class="container">
    <div class="card">
        <div class="card-header">
            <h1>Cadastrar cliente</h1>
        </div>
        <div class="card-body">
            <form action="/clientes/new" method="POST">
                <label>Nome do cliente:</label>
                <input type="text" name="nome" id="nome" placeholder="Insira o nome do cliente" class="form-control" required>
                <label>CPF:</label>
                <input type="text" name="cpf" id="cpf" placeholder="Insira o CPF do cliente" class="form-control" required>
                <label>Rua:</label>
                <input type="text" name="rua" id="rua" placeholder="Insira a rua do endereço do cliente" class="form-control" required>
                <label>Número:</label>
                <input type="text" name="numero" id="numero" placeholder="Insira o número do endereço do cliente" class="form-control" required>
                <label>Bairro:</label>
                <input type="text" name="bairro" id="bairro" placeholder="Insira o bairro do endereço do cliente" class="form-control" required>
                <br>
                <button class="btn btn-success">Cadastrar</button>
            </form>
            <hr>
        </div>
    </div>
</div>
<br>

<div class="container">
    <div class="card">
        <div class="card-header">
            <h1>Clientes</h1>
        </div>
        <div class="card-body">
            <table>
                <thead>
                    <tr>
                        <th></th>
                        <th>Nome:</th>
                        <th>CPF:</th>
                        <th>Rua:</th>
                        <th>Número:</th>
                        <th>Bairro:</th>
                        <th style="text-align: center;" colspan="2">Ações:</th>
                    </tr>
                </thead>
                <tbody>
                    <% clientes.forEach(cliente => { %>
                    <tr>
                        <td><img width="30px" src="imgs/avatar.png" alt="Clientes"></td>
                        <td><%= cliente.nome %></td>
                        <td><%= cliente.cpf %></td>
                        <% cliente.enderecos.forEach(endereco => { %>
                        <td><%= endereco.rua %></td>
                        <td><%= endereco.numero %></td>
                        <td><%= endereco.bairro %></td>
                        <% }) %>
                        <td><a style="color: orange;" href="/clientes/edit/<%= cliente._id %>">Editar</a></td>
                        <td><a style="color: red;" href="/clientes/delete/<%= cliente._id %>" onclick="return confirm('Confirma a exclusão do registro?')">Excluir</a></td>
                    </tr>
                    <% }) %>
                </tbody>
            </table>
        </div>
    </div>
</div>

<%- include ('partials/footer.ejs') %>